<form id="loginForm">
  <div class="form-group form-focus">
    <input type="email" class="form-control floating" id="email" required />
    <label class="focus-label">Email</label>
  </div>
  <div class="form-group form-focus">
    <input type="password" class="form-control floating" id="password" required />
    <label class="focus-label">Password</label>
  </div>
  <div class="text-right">
    <a class="forgot-link" href="forgot-password.html">Forgot Password?</a>
  </div>
  <button type="submit" class="btn btn-primary btn-block btn-lg">Login</button>

  <div id="loginError" class="text-danger mt-3" style="display: none;"></div>
</form>

<script>
  const loginForm = document.getElementById('loginForm');
  const loginError = document.getElementById('loginError');

  loginForm.addEventListener('submit', async (event) => {
    event.preventDefault(); // Prevent the default form submission

    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    try {
      const response = await fetch('http://localhost:3000/api/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ email, password }),
      });

      const result = await response.json();
      if (response.ok) {
        alert('Login successful!');
        window.location.href = 'doctor-dashboard.html'; // Redirect on success
      } else {
        loginError.style.display = 'block';
        loginError.textContent = result.message; // Show error message
      }
    } catch (error) {
      loginError.style.display = 'block';
      loginError.textContent = 'An error occurred. Please try again later.';
    }
  });
</script>